# ====================
# ENVIRONMENT CONFIGURATION
# ====================
# Determines which config file to use: config/credentials/dev.json or config/credentials/prod.json
# Options: development, production
# Default: development
NODE_ENV=development

# ====================
# MINIMAL RUNTIME CONFIGURATION
# ====================
# These are the only environment variables needed at runtime
# All other configuration should be in config/credentials/{dev|prod}.json

# Encryption key for API keys (e.g., Bitly tokens) - same for all environments
# Generate: openssl rand -base64 32
ENCRYPTION_KEY=your_32_character_encryption_key_here

# NextAuth secret for session encryption (optional)
# Generate: openssl rand -base64 32
NEXTAUTH_SECRET=your_random_secret_key_here

# Vercel Cron Job Security (production only)
# Secret used to authenticate cron job requests from Vercel
# Generate: openssl rand -base64 32
CRON_SECRET=your_secure_random_cron_secret_here

# ====================
# WEBHOOK SECURITY (DEVELOPMENT)
# ====================
# Controls webhook signature verification behavior in development

# Bypass webhook security validation (DEVELOPMENT ONLY)
# Set to 'true' to skip HubSpot signature verification during local development
# WARNING: This creates a security vulnerability - only use for rapid iteration
# 
# Security bypass conditions (ALL must be true):
# - ConfigManager environment = 'dev'
# - NODE_ENV = 'development'  
# - BYPASS_WEBHOOK_SECURITY = 'true'
#
# Recommended: Use test signature generation utilities instead of bypassing security
BYPASS_WEBHOOK_SECURITY=false

# ====================
# CONFIGURATION FILES
# ====================
# Main configuration is stored in JSON files:
# - config/credentials/dev.json (development environment)
# - config/credentials/prod.json (production environment)
#
# Copy the example files to get started:
# cp config/credentials/dev.example.json config/credentials/dev.json
# cp config/credentials/prod.example.json config/credentials/prod.json
#
# Then edit the JSON files with your actual credentials.

# ====================
# DEPLOYMENT NOTES
# ====================
# For Vercel deployment:
# 1. Set NODE_ENV=production in Vercel environment variables
# 2. Set ENCRYPTION_KEY (same value across all environments)
# 3. Set CRON_SECRET for cron job authentication
# 4. Create config/credentials/prod.json with production credentials
#
# For local development:
# 1. Keep NODE_ENV=development (or unset)
# 2. Set ENCRYPTION_KEY
# 3. Set BYPASS_WEBHOOK_SECURITY=false (use test utilities for webhook testing)
# 4. Create config/credentials/dev.json with development credentials

# ====================
# WEBHOOK DEVELOPMENT GUIDE
# ====================
# For testing webhooks locally, you have two options:
#
# Option 1: Use Test Signature Generation (RECOMMENDED)
# - Import generateTestWebhookRequest from @/lib/dev/webhook-test-utils
# - Creates valid HubSpot signatures for comprehensive testing
# - Tests real security logic without bypassing
#
# Option 2: Bypass Security (QUICK ITERATION ONLY)
# - Set BYPASS_WEBHOOK_SECURITY=true
# - Only works when: dev environment + development NODE_ENV + explicit flag
# - Shows clear warnings when bypassed
# - Never enable in production

# ====================
# LEGACY VARIABLES (DEPRECATED)
# ====================
# The following variables are NO LONGER USED.
# Configuration has moved to JSON files in config/credentials/
# 
# Old variables (for reference only):
# - HUBSPOT_DEV_CLIENT_ID → config/credentials/dev.json
# - HUBSPOT_DEV_CLIENT_SECRET → config/credentials/dev.json
# - SUPABASE_DEV_URL → config/credentials/dev.json
# - SUPABASE_DEV_ANON_KEY → config/credentials/dev.json
# - etc.